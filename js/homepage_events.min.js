var events={};function extract(e,n){var t=n.split("."),a=t.shift();return t.length>0?extract(e[a],t.join(".")):e[a]}function GetCalEvents(e,n){$.ajax({type:"POST",url:"/includes/events.php?m="+e+"&y="+n,dataType:"text",contentType:"application/x-javascript; charset:utf-8",beforeSend:function(){$("#calendar-spinner").show()},complete:function(){$("#calendar-spinner").hide()},success:function(e){events=JSON.parse(e);var n=[];for(var t in events){var a=events[t][0].color.split("|");n.push(a)}for(var o=[],c=[],r=0;r<n.length;r++){var s=n[r].toString();-1==c.indexOf(s)&&(c.push(s),o.push(n[r]))}$("#calendar").calendario("setData",events);for(var r=0;r<o.length;r++){o[r][0];var i=o[r][1];$(this).addClass("btn-"+i)}}})}function GetFlashNews(e){$.ajax({type:"POST",url:"/includes/flashnews.php",dataType:"text",contentType:"application/x-www-form-urlencoded; charset=utf-8",cache:!1,beforeSend:function(){1==e&&$("#flash-spinner").show()},complete:function(){$("#flash-spinner").hide()},success:function(e){e?($("#flash-container").html(e).fadeIn(1500),$(function(){$(".lazy").lazy({effect:"fadeIn",afterLoad:function(e){e.removeClass("lazy")}})})):Notification(LANG_FLASH_CANNOT)}})}$(document).ready(function(){$(function(){function e(){$("#custom-month").html($("#calendar").calendario("getMonthName")),$("#custom-year").html($("#calendar").calendario("getYear")),GetCalEvents($("#calendar").calendario("getMonth"),$("#calendar").calendario("getYear"))}$(document).on("finish.calendar.calendario",function(n){GetCalEvents($("#calendar").calendario("getMonth"),$("#calendar").calendario("getYear")),$("#custom-month").html($("#calendar").calendario("getMonthName")),$("#custom-year").html($("#calendar").calendario("getYear")),$("#custom-next").on("click",function(){$("#calendar").calendario("gotoNextMonth",e)}),$("#custom-prev").on("click",function(){$("#calendar").calendario("gotoPreviousMonth",e)}),$("#custom-current").on("click",function(){$("#calendar").calendario("gotoNow",e)})}),$("#calendar").on("shown.calendar.calendario",function(){$("div.fc-row > div").on("onDayClick.calendario",function(e,a){var o,c,r,s;void 0!==a.data.content&&a.data.content.length>0&&(o=a.data.html,c=a,t(),r=$('<div id="custom-content-reveal" class="animated--fade-in list-group border custom-content-reveal h-100 p-2 position-absolute top w-100" style="top:0; left:0; background:rgba(246, 246, 246, 0.9); z-index:11;"><h6 class="font-weight-bold text-center text-success text-uppercase">'+LANG_CALENDAR_GAMESFOR+" "+c.day+"."+c.monthname+" "+c.year+"</h4></div>"),s=$('<div class="p-1 position-absolute" style="right: 0; top: 0;"><button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>').on("click",t),r.append(o.join(""),s).insertAfter(n),setTimeout(function(){r.css("opacity","1")},25))})});var n=$("#custom-inner");function t(){var e=$("#custom-content-reveal");e.length>0&&(e.css("opacity","0"),e.remove())}$("#calendar").calendario({caldata:events,displayWeekAbbr:!0,events:["click","focus","hover"]})}),$("body").on("click","#flashnews-refresh",function(){var e=$(this).find(".fa-sync-alt");$({deg:0}).animate({deg:359},{duration:1e3,step:function(n){e.css({transform:"rotate("+n+"deg)"})},complete:function(){e.css({transform:"rotate(0deg)"})}}),GetFlashNews(1)}),$("#flash-spinner").show(),GetFlashNews(0)});